<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Fitness Equipment Service Request</title>
    <link href="https://cdn.jsdelivr.net/npm/remixicon@3.5.0/fonts/remixicon.css" rel="stylesheet">
    <style>
        :root {
            --primary-color: #2c3e50;
            --accent-color: #3498db;
            --light-color: #ecf0f1;
            --dark-color: #2c3e50;
            --success-color: #27ae60;
            --error-color: #e74c3c;
            --border-radius: 8px;
            --box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
        }
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        body {
            background-color: #f5f7fa;
            color: #333;
            line-height: 1.6;
        }
        
        .quote-section {
            max-width: 1200px;
            margin: 2rem auto;
            padding: 0 1rem;
        }
        
        .form-container {
            display: grid;
            grid-template-columns: 1fr;
            gap: 2rem;
        }
        
        @media (min-width: 992px) {
            .form-container {
                grid-template-columns: 1fr 350px;
            }
        }
        
        .form-header {
            background: linear-gradient(135deg, var(--primary-color), var(--accent-color));
            color: white;
            padding: 2rem;
            border-radius: var(--border-radius);
            box-shadow: var(--box-shadow);
        }
        
        .form-header h2 {
            font-size: 2rem;
            margin-bottom: 1rem;
        }
        
        .form-header p {
            font-size: 1.1rem;
        }
        
        .quote-form {
            background: white;
            padding: 2rem;
            border-radius: var(--border-radius);
            box-shadow: var(--box-shadow);
            display: grid;
            grid-template-columns: 1fr;
            gap: 1.5rem;
        }
        
        @media (min-width: 768px) {
            .quote-form {
                grid-template-columns: 1fr 1fr;
            }
            
            .full-width {
                grid-column: 1 / span 2;
            }
        }
        
        .form-section-title {
            grid-column: 1 / -1;
            color: var(--primary-color);
            border-bottom: 2px solid var(--accent-color);
            padding-bottom: 0.5rem;
            margin-top: 1rem;
        }
        
        .form-group {
            display: flex;
            flex-direction: column;
            position: relative;
        }
        
        .form-group label {
            margin-bottom: 0.5rem;
            font-weight: 600;
            color: var(--primary-color);
        }
        
        .form-group label.required::after {
            content: "*";
            color: var(--error-color);
            margin-left: 4px;
        }
        
        input, select, textarea {
            padding: 0.8rem;
            border: 1px solid #ddd;
            border-radius: var(--border-radius);
            font-size: 1rem;
            transition: all 0.3s;
        }
        
        input:focus, select:focus, textarea:focus {
            outline: none;
            border-color: var(--accent-color);
            box-shadow: 0 0 0 3px rgba(52, 152, 219, 0.2);
        }
        
        input.error, select.error, textarea.error {
            border-color: var(--error-color);
        }
        
        .error-message {
            color: var(--error-color);
            font-size: 0.85rem;
            margin-top: 0.25rem;
            display: none;
        }
        
        .error-message.show {
            display: block;
        }
        
        .radio-group {
            display: flex;
            gap: 1.5rem;
            margin-top: 0.5rem;
        }
        
        .radio-option {
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }
        
        .radio-option input[type="radio"] {
            width: 18px;
            height: 18px;
        }
        
        .form-note {
            font-size: 0.85rem;
            color: #7f8c8d;
            margin-top: 0.25rem;
        }
        
        .submit-btn {
            grid-column: 1 / -1;
            margin-top: 1rem;
        }
        
        .submit-btn button {
            background: linear-gradient(135deg, var(--accent-color), #1d6fa5);
            color: white;
            border: none;
            border-radius: var(--border-radius);
            padding: 1rem 2rem;
            font-size: 1.1rem;
            font-weight: 600;
            cursor: pointer;
            display: flex;
            align-items: center;
            gap: 0.5rem;
            transition: all 0.3s;
        }
        
        .submit-btn button:hover {
            transform: translateY(-3px);
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
        }
        
        .submit-btn button:active {
            transform: translateY(0);
        }
        
        .success-message {
            background: white;
            padding: 2rem;
            border-radius: var(--border-radius);
            box-shadow: var(--box-shadow);
            text-align: center;
            display: none;
        }
        
        .success-message.show {
            display: block;
            animation: fadeIn 0.5s ease-out;
        }
        
        .success-message i {
            font-size: 3rem;
            color: var(--success-color);
            margin-bottom: 1rem;
        }
        
        .success-message h3 {
            color: var(--success-color);
            margin-bottom: 1rem;
        }
        
        .loading-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(255, 255, 255, 0.9);
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            z-index: 1000;
            display: none;
        }
        
        .loading-spinner {
            border: 4px solid rgba(52, 152, 219, 0.2);
            border-radius: 50%;
            border-top: 4px solid var(--accent-color);
            width: 40px;
            height: 40px;
            animation: spin 1s linear infinite;
            margin-bottom: 1rem;
        }
        
        .contact-card {
            background: white;
            padding: 2rem;
            border-radius: var(--border-radius);
            box-shadow: var(--box-shadow);
            margin-top: 2rem;
        }
        
        .contact-card h3 {
            color: var(--primary-color);
            margin-bottom: 1.5rem;
            text-align: center;
        }
        
        .contact-info {
            display: flex;
            flex-direction: column;
            gap: 1rem;
        }
        
        .contact-item {
            display: flex;
            align-items: center;
            gap: 0.75rem;
            color: var(--dark-color);
        }
        
        .contact-item i {
            color: var(--accent-color);
            font-size: 1.25rem;
        }
        
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
    </style>
</head>
<body>
    <!-- Quote Form Section -->
    <section class="quote-section" itemscope itemtype="https://schema.org/Service">
        <div class="form-container">
            <div class="form-header">
                <h2 itemprop="name">WE'LL GET YOU BACK UP AND RUNNING</h2>
                <p itemprop="description">To serve you better, please describe the problem you are having with your machine and provide as much detail as possible. Include photos and videos with your request to help us troubleshoot your problem better.</p>
            </div>
            
            <!-- Success Message -->
            <div id="successMessage" class="success-message">
                <i class="ri-checkbox-circle-line"></i>
                <h3>Thank You for Your Request!</h3>
                <p>We've received your quote request and will contact you shortly to confirm your appointment.</p>
            </div>
            
            <form class="quote-form" id="quoteForm" itemscope itemtype="https://schema.org/ServiceRequest">
                <h3 class="form-section-title">Personal Information</h3>
                
                <div class="form-group" itemprop="customer" itemscope itemtype="https://schema.org/Person">
                    <label for="firstName" class="required">First Name</label>
                    <input type="text" id="firstName" name="firstName" placeholder="First Name" required itemprop="givenName">
                    <div class="error-message" id="firstNameError">Please enter your first name</div>
                </div>
                
                <div class="form-group" itemprop="customer">
                    <label for="lastName">Last Name</label>
                    <input type="text" id="lastName" name="lastName" placeholder="Last Name" itemprop="familyName">
                </div>
                
                <div class="form-group" itemprop="customer">
                    <label for="contactNumber" class="required">Contact Number</label>
                    <input type="tel" id="contactNumber" name="contactNumber" placeholder="(123) 456-7890" required itemprop="telephone">
                    <div class="error-message" id="contactNumberError">Please enter a valid phone number</div>
                </div>
                
                <div class="form-group" itemprop="customer">
                    <label for="email" class="required">Email Address</label>
                    <input type="email" id="email" name="email" placeholder="example@email.com" required itemprop="email">
                    <div class="error-message" id="emailError">Please enter a valid email address</div>
                </div>
                
                <div class="form-group" itemprop="customer">
                    <label for="preferredContact" class="required">Preferred Contact Method</label>
                    <select id="preferredContact" name="preferredContact" required>
                        <option value="">-- Select Contact Method --</option>
                        <option value="email">Email</option>
                        <option value="phone">Contact Number</option>
                    </select>
                    <div class="error-message" id="preferredContactError">Please select a contact method</div>
                </div>
                
                <div class="form-group full-width" itemprop="serviceLocation" itemscope itemtype="https://schema.org/Place">
                    <div itemprop="address" itemscope itemtype="https://schema.org/PostalAddress">
                        <label for="address" class="required">Street Address</label>
                        <input type="text" id="address" name="address" placeholder="123 Example Street" required itemprop="streetAddress">
                        <div class="error-message" id="addressError">Please enter your address</div>
                    </div>
                </div>
                
                <div class="form-group" itemprop="serviceLocation" itemscope itemtype="https://schema.org/Place">
                    <div itemprop="address" itemscope itemtype="https://schema.org/PostalAddress">
                        <label for="city" class="required">City/Town</label>
                        <select id="city" name="city" required itemprop="addressLocality">
                            <option value="">-- Select City/Town --</option>
                            <option value="Toronto">Toronto</option>
                            <option value="Mississauga">Mississauga</option>
                            <option value="Brampton">Brampton</option>
                            <option value="Hamilton">Hamilton</option>
                            <option value="Oakville">Oakville</option>
                            <option value="Burlington">Burlington</option>
                            <option value="Oshawa">Oshawa</option>
                            <option value="Whitby">Whitby</option>
                            <option value="Ajax">Ajax</option>
                            <option value="Pickering">Pickering</option>
                        </select>
                        <div class="error-message" id="cityError">Please select your city</div>
                    </div>
                </div>
                
                <div class="form-group" itemprop="serviceLocation" itemscope itemtype="https://schema.org/Place">
                    <div itemprop="address" itemscope itemtype="https://schema.org/PostalAddress">
                        <label for="postal" class="required">Postal Code</label>
                        <input type="text" id="postal" name="postal" placeholder="A1A 1A1" required itemprop="postalCode">
                        <div class="error-message" id="postalError">Please enter a valid postal code</div>
                    </div>
                </div>
                
                <div class="form-group" itemprop="serviceLocation" itemscope itemtype="https://schema.org/Place">
                    <div itemprop="address" itemscope itemtype="https://schema.org/PostalAddress">
                        <label for="province">Province</label>
                        <select id="province" name="province" disabled>
                            <option value="ON" selected>Ontario</option>
                        </select>
                        <meta itemprop="addressRegion" content="ON">
                    </div>
                </div>
                
                <div class="form-group" itemprop="serviceLocation" itemscope itemtype="https://schema.org/Place">
                    <div itemprop="address" itemscope itemtype="https://schema.org/PostalAddress">
                        <label for="country">Country</label>
                        <input type="text" id="country" name="country" value="Canada" disabled>
                        <meta itemprop="addressCountry" content="CA">
                    </div>
                </div>
                
                <h3 class="form-section-title">Equipment Information</h3>
                
                <div class="form-group">
                    <label for="serviceRequest" class="required">Service Request</label>
                    <select id="serviceRequest" name="serviceRequest" required itemprop="serviceType">
                        <option value="">-- Select Service --</option>
                        <option value="Preventative Maintenance">Preventative Maintenance</option>
                        <option value="Inspection">Inspection</option>
                        <option value="Repairs & Tune-Ups">Repairs & Tune-Ups</option>
                        <option value="Relocation & Assembly">Relocation & Assembly</option>
                    </select>
                    <div class="error-message" id="serviceRequestError">Please select a service</div>
                </div>
                
                <div class="form-group">
                    <label class="required">I am a(n)</label>
                    <div class="radio-group">
                        <div class="radio-option">
                            <input type="radio" id="individual" name="clientType" value="Individual" required>
                            <label for="individual">Individual</label>
                        </div>
                        <div class="radio-option">
                            <input type="radio" id="business" name="clientType" value="Business">
                            <label for="business">Business</label>
                        </div>
                    </div>
                    <div class="error-message" id="clientTypeError">Please select client type</div>
                </div>
                
                <div class="form-group" itemprop="item" itemscope itemtype="https://schema.org/Product">
                    <label for="brand" class="required">Equipment Manufacturer</label>
                    <input type="text" id="brand" name="brand" required placeholder="e.g. NordicTrack, LifeFitness" itemprop="brand">
                    <div class="error-message" id="brandError">Please enter the manufacturer</div>
                </div>
                
                <div class="form-group" itemprop="item" itemscope itemtype="https://schema.org/Product">
                    <label for="model" class="required">Model Number</label>
                    <input type="text" id="model" name="model" required placeholder="e.g. NTL19125 or NTL17125" itemprop="model">
                    <div class="error-message" id="modelError">Please enter the model number</div>
                </div>
                
                <div class="form-group" itemprop="item" itemscope itemtype="https://schema.org/Product">
                    <label for="serial">Serial Number</label>
                    <input type="text" id="serial" name="serial" itemprop="serialNumber">
                </div>
                
                <div class="form-group">
                    <label for="bookingDateTime" class="required">Preferred Booking Date & Time</label>
                    <input type="datetime-local" id="bookingDateTime" name="bookingDateTime" required itemprop="startTime">
                    <div class="error-message" id="bookingDateTimeError">Please select a date and time</div>
                </div>
                
                <div class="form-group full-width">
                    <label for="description" class="required">Description of Issue</label>
                    <textarea id="description" name="description" rows="5" required placeholder="Example: Treadmill belt slipping, Elliptical making noise, Console not powering on, Motor overheating, Resistance not adjusting..." itemprop="description"></textarea>
                    <div class="error-message" id="descriptionError">Please describe the issue</div>
                </div>
                
                <div class="form-group full-width">
                    <label for="equipmentFile">Upload Equipment Image/Video</label>
                    <input type="file" id="equipmentFile" name="equipmentFile" accept="image/*,video/*">
                    <div class="form-note">Upload images or short videos showing the issue (optional)</div>
                </div>
                
                <div class="submit-btn">
                    <button type="submit">
                        <i class="ri-service-line"></i> Book Your Service Now
                    </button>
                </div>
            </form>

            <!-- Loading overlay for form submission -->
            <div id="loadingOverlay" class="loading-overlay">
                <div class="loading-spinner"></div>
                <p>Submitting your request...</p>
            </div>
            
            <div class="contact-card" itemscope itemtype="https://schema.org/LocalBusiness">
                <h3>Need Immediate Assistance?</h3>
                <div class="contact-info">
                    <div class="contact-item" itemprop="telephone">
                        <i class="ri-phone-line"></i>
                        <span>+1 289 925 7239</span>
                    </div>
                    <div class="contact-item" itemprop="email">
                        <i class="ri-mail-line"></i>
                        <span id="contactcardemail">canadianfitnessrepair@gmail.com</span>
                    </div>
                    <div class="contact-item" itemprop="address" itemscope itemtype="https://schema.org/PostalAddress">
                        <i class="ri-map-pin-line"></i>
                        <span itemprop="addressLocality">Hamilton</span>, 
                        <span itemprop="addressRegion">ON</span>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Add EmailJS SDK -->
    <script src="https://cdn.jsdelivr.net/npm/emailjs-com@3/dist/email.min.js"></script>
    
    <script>
        document.addEventListener('DOMContentLoaded', function () {
            // Initialize EmailJS with your User ID
            emailjs.init("Y3qHd9eGkrVsfM-Fs");
            
            // Form submission handling
            const quoteForm = document.getElementById('quoteForm');
            const successMessage = document.getElementById('successMessage');
            const loadingOverlay = document.getElementById('loadingOverlay');
            
            // Initially hide success message
            successMessage.style.display = 'none';
            
            quoteForm.addEventListener('submit', function(e) {
                e.preventDefault();
                
                // Clear previous errors
                clearErrors();
                
                // Form validation
                if (validateForm()) {
                    // Show loading overlay
                    loadingOverlay.style.display = 'flex';
                    
                    const formData = {
                        firstName: document.getElementById('firstName').value,
                        lastName: document.getElementById('lastName').value,
                        contactNumber: document.getElementById('contactNumber').value,
                        email: document.getElementById('email').value,
                        preferredContact: document.getElementById('preferredContact').value,
                        address: document.getElementById('address').value,
                        city: document.getElementById('city').value,
                        postal: document.getElementById('postal').value,
                        serviceRequest: document.getElementById('serviceRequest').value,
                        clientType: document.querySelector('input[name="clientType"]:checked')?.value || "Not specified",
                        brand: document.getElementById('brand').value,
                        model: document.getElementById('model').value,
                        serial: document.getElementById('serial').value,
                        bookingDateTime: document.getElementById('bookingDateTime').value,
                        description: document.getElementById('description').value,
                        province: document.getElementById('province').value,
                        country: document.getElementById('country').value
                    };
                    
                    // Send email using EmailJS
                    emailjs.send("service_15f1fcs", "template_pq3tpbe", formData)
                        .then(function(response) {
                            console.log("Email sent successfully!", response);
                            
                            // Hide loading overlay
                            loadingOverlay.style.display = 'none';
                            
                            // Show success message
                            successMessage.style.display = 'block';
                            
                            // Hide form
                            quoteForm.style.display = 'none';
                            
                            // Reset form after 5 seconds
                            setTimeout(() => {
                                quoteForm.reset();
                                quoteForm.style.display = 'grid';
                                successMessage.style.display = 'none';
                            }, 5000);
                        }, function(error) {
                            console.log("Email failed to send:", error);
                            
                            // Hide loading overlay
                            loadingOverlay.style.display = 'none';
                            
                            alert('Failed to send your request. Please try again or contact us directly.');
                        });
                }
            });
            
            // Form validation function
            function validateForm() {
                let isValid = true;
                
                // Required fields validation
                const requiredFields = [
                    'firstName', 'contactNumber', 'email', 'preferredContact',
                    'address', 'city', 'postal', 'serviceRequest', 'brand',
                    'model', 'bookingDateTime', 'description'
                ];
                
                requiredFields.forEach(field => {
                    const element = document.getElementById(field);
                    if (!element.value.trim()) {
                        isValid = false;
                        showError(element, field + 'Error', 'This field is required');
                    }
                });
                
                // Client type validation
                const clientType = document.querySelector('input[name="clientType"]:checked');
                if (!clientType) {
                    isValid = false;
                    showError(null, 'clientTypeError', 'Please select client type');
                }
                
                // Email validation
                const email = document.getElementById('email');
                if (email.value && !validateEmail(email.value)) {
                    isValid = false;
                    showError(email, 'emailError', 'Please enter a valid email address');
                }
                
                // Phone validation
                const phone = document.getElementById('contactNumber');
                if (phone.value && !validatePhone(phone.value)) {
                    isValid = false;
                    showError(phone, 'contactNumberError', 'Please enter a valid phone number');
                }
                
                // Postal code validation
                const postal = document.getElementById('postal');
                if (postal.value && !validatePostalCode(postal.value)) {
                    isValid = false;
                    showError(postal, 'postalError', 'Please enter a valid postal code');
                }
                
                return isValid;
            }
            
            // Helper functions
            function validateEmail(email) {
                const re = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
                return re.test(email);
            }
            
            function validatePhone(phone) {
                const re = /^(\+\d{1,2}\s?)?\(?\d{3}\)?[\s.-]?\d{3}[\s.-]?\d{4}$/;
                return re.test(phone);
            }
            
            function validatePostalCode(postal) {
                const re = /^[A-Za-z]\d[A-Za-z][ -]?\d[A-Za-z]\d$/;
                return re.test(postal);
            }
            
            function showError(element, errorId, message) {
                const errorElement = document.getElementById(errorId);
                errorElement.textContent = message;
                errorElement.style.display = 'block';
                
                if (element) {
                    element.classList.add('error');
                }
            }
            
            function clearErrors() {
                // Hide all error messages
                document.querySelectorAll('.error-message').forEach(el => {
                    el.style.display = 'none';
                });
                
                // Remove error classes from inputs
                document.querySelectorAll('.error').forEach(el => {
                    el.classList.remove('error');
                });
            }
            
            // Add real-time validation
            document.querySelectorAll('input, select, textarea').forEach(field => {
                field.addEventListener('blur', function() {
                    if (this.hasAttribute('required') && !this.value.trim()) {
                        const errorId = this.id + 'Error';
                        showError(this, errorId, 'This field is required');
                    } else {
                        const errorElement = document.getElementById(this.id + 'Error');
                        if (errorElement) {
                            errorElement.style.display = 'none';
                        }
                        this.classList.remove('error');
                    }
                    
                    // Specific field validations
                    if (this.id === 'email' && this.value) {
                        if (!validateEmail(this.value)) {
                            showError(this, 'emailError', 'Please enter a valid email address');
                        }
                    }
                    
                    if (this.id === 'contactNumber' && this.value) {
                        if (!validatePhone(this.value)) {
                            showError(this, 'contactNumberError', 'Please enter a valid phone number');
                        }
                    }
                    
                    if (this.id === 'postal' && this.value) {
                        if (!validatePostalCode(this.value)) {
                            showError(this, 'postalError', 'Please enter a valid postal code');
                        }
                    }
                });
            });
            
            // Radio button validation
            document.querySelectorAll('input[name="clientType"]').forEach(radio => {
                radio.addEventListener('change', function() {
                    document.getElementById('clientTypeError').style.display = 'none';
                });
            });
        });
    </script>
</body>
</html>